<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="tribuna.content">
<body>
<metal:block fill-slot="style_slot">
    <link rel="stylesheet" type="text/css"
            tal:define="navroot context/@@plone_portal_state/navigation_root_url"
            tal:attributes="href string:${navroot}/++resource++tribuna.diazotheme/css/jquery-ui-1.10.3.custom.min.css"
            />
        <script type="text/javascript"
            tal:define="navroot context/@@plone_portal_state/navigation_root_url"
            tal:attributes="src string:${navroot}/++resource++tribuna.diazotheme/js/jquery-ui-1.10.3.custom.min.js"
            ></script>
        <link rel="stylesheet" type="text/css"
            tal:define="navroot context/@@plone_portal_state/navigation_root_url"
            tal:attributes="href string:${navroot}/++resource++tribuna.diazotheme/css/jquery.galleryview-3.0.css"
            />
        <script type="text/javascript"
            tal:define="navroot context/@@plone_portal_state/navigation_root_url"
            tal:attributes="src string:${navroot}/++resource++tribuna.diazotheme/js/jquery.galleryview-3.0.js"
            ></script>
        <script type="text/javascript"
            tal:define="navroot context/@@plone_portal_state/navigation_root_url"
            tal:attributes="src string:${navroot}/++resource++tribuna.diazotheme/js/jquery.easing.1.3.js"
            ></script>
        <script type="text/javascript"
            tal:define="navroot context/@@plone_portal_state/navigation_root_url"
            tal:attributes="src string:${navroot}/++resource++tribuna.diazotheme/js/jquery.timers-1.2.js"
            ></script>
        <script type="text/javascript"
            tal:define="navroot context/@@plone_portal_state/navigation_root_url"
            tal:attributes="src string:${navroot}/++resource++tribuna.diazotheme/js/jquery.inview.js"
            ></script>

</metal:block>


<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main"
        >

<!--         <div tal:replace="structure provider:plone.abovecontenttitle" /> -->

        <!-- <h1 class="documentFirstHeading"> Main page </h1> -->


        <!-- <div tal:replace="structure provider:plone.belowcontenttitle" />
        <div tal:replace="structure provider:plone.abovecontentbody" /> -->

        <!-- <h2 i18n:translate="">Articles</h2> -->




        <div id="gallery-container" class="slider-header">
          <ul id="gallery">

          <tal:block tal:repeat="article view/articles_all">
            <li id="${article/getId}">
              <tal:block tal:condition="python: article.portal_type == 'tribuna.content.article'">
                <div tal:content="article/title" />
                <div class="red">
                  ƒçlanek
                </div>
              </tal:block>
              <tal:block tal:condition="python: article.portal_type == 'Discussion Item'">
                <div tal:content="python: article.getText().replace('<p>', '').replace('</p>','')[:25]" />
		<div class="red">
                  komentar
                </div>
              </tal:block>


              <div class="gv-panel-content">
                  <tal:block tal:condition="python: article.portal_type == 'tribuna.content.article'">
                    <div id="left-column" class="span2" >
                      <div id="selected-tags">
                        <div  class="unstyled" id="selected-tags-list">
                            <span tal:repeat="tag article/Subject" class="selected">${tag}</span>
                        </div>
                      </div>

                      <input id="activate-${article/UID}" type="checkbox" checked="checked" >articles</input>
                      <input id="activate-comments-${article/UID}" type="checkbox" >comments</input>
                    </div>
                    <div id="center-column-${article/UID}" class="main-page-article-body span12">
                      <h3 tal:content="article/title" />
                      <img tal:attributes="src string:${article/absolute_url}/@@images/image" />
                      <p tal:content="structure article/text" />
                      <!-- <div tal:content="structure article/view/get_addthis_viewlet" /> -->
                    </div>

                    <div id="comments-${article/UID}" class="span4 hidden main-page-comments" url="${article/absolute_url}/@@comments-view" />
                    <script>
                      $(document).ready(function() {
                        $('#activate-${article/UID}').click(function () {

                            if (! $(this).attr("checked")) {
                              $(this).attr("checked", "checked");
                              // $('#center-column-${article/UID}').attr("class", "span10");
                              $('#center-column-${article/UID}').removeClass('hidden');
                              $('#comments-${article/UID}').removeClass('span12').addClass('span4');

                            } else {
                              $(this).removeAttr("checked");
                              // $('#center-column-${article/UID}').attr("class", "span10 hidden");
                              $('#center-column-${article/UID}').addClass('hidden');
                              $('#comments-${article/UID}').removeClass('span4').addClass('span12');
                            }
                          });
                        $('#activate-comments-${article/UID}').click(function () {

                            if (! $(this).attr("checked")) {
                              $(this).attr("checked", "checked");

                              $('#comments-${article/UID}').removeClass('hidden');
                              $('#center-column-${article/UID}').removeClass('span12').addClass('span10');

                              if ($('#comments-${article/UID}').contents().length == 0) {
                                $('#comments-${article/UID}').load('${article/absolute_url}/@@comments-view');
                                $('#comments-${article/UID}').css('overflow-y', 'auto');
                              }

                            } else {
                              $(this).removeAttr("checked");
                              $('#comments-${article/UID}').addClass('hidden');
                              $('#center-column-${article/UID}').removeClass('span10').addClass('span12');
                            }
                          });
                       });
                    </script>
                </tal:block>
                <tal:block tal:condition="python: article.portal_type == 'Discussion Item'">
                  <div id="left-column" class="span2" >
                      <div id="selected-tags">
                        <div  class="unstyled" id="selected-tags-list">
                            <span tal:repeat="tag article/subject" class="selected">${tag}</span>
                        </div>
                      </div>
                    </div>
                    <div id="center-column" class="span12">
                      <h3 tal:content="article/author_name" />
                      <img tal:attributes="src string:++theme++tribuna.diazotheme/img/blank.gif" />
                      <p tal:content="structure article/getText" />

                    </div>

                </tal:block>
              </div>
            </li>

          </tal:block>
          </ul>
        </div>
        <div id="home-page-link" style="position: absolute;top: 170px; right: 5%" >
          <a href="${context/portal_url}/home-page">
            <img src="++theme++tribuna.diazotheme/img/x-sign.png" style="width: 15px; height:15px" />
          </a>
        </div>

        <div tal:replace="structure provider:plone.belowcontentbody" />

    </tal:main-macro>
</metal:main>

</body>
</html>
